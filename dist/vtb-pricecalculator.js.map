{"version":3,"file":"vtb-pricecalculator.js","sourceRoot":"","sources":["../src/vtb-pricecalculator.ts"],"names":[],"mappings":"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","sourcesContent":["import {LitElement, html, css} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport {TemplateResult} from 'lit-element';\nimport {ifDefined} from 'lit/directives/if-defined.js';\n\nclass VtbPriceCalculatorDataPriceParticipant {\n  participant_id = '';\n  price = 0.0;\n}\n\nexport class VtbPriceCalculatorDataPriceElement {\n  title?: string;\n  subtitle?: string;\n  price = 0.0;\n  optional = false;\n  nights = 0;\n  hidden = false;\n  day?: number;\n  unitid?: number;\n  participants?: Array<VtbPriceCalculatorDataPriceParticipant>;\n  grouptitle?: string;\n}\n\nexport class FilterConfig {\n  segments?: Array<Array<number | string>> = [];\n  units?: Array<Array<number | string>> = [];\n  participants?: Array<number | string> = [];\n  optional?: boolean;\n}\n\nexport class VtbPriceCalculatorData {\n  _data: any; // eslint-disable-line @typescript-eslint/no-explicit-any\n\n  filter(config?: FilterConfig) {\n    const price_elements: Array<VtbPriceCalculatorDataPriceElement> = [];\n\n    const _segment_ids = config?.segments || Object.keys(this._data);\n    const segment_ids = _segment_ids.flat(Infinity);\n\n    const _unit_ids = config?.units || [];\n    const unit_ids = _unit_ids.flat(Infinity);\n\n    const _participant_ids = config?.participants || [];\n    const participant_ids = _participant_ids.flat(Infinity);\n\n    let check_unit_ids = false;\n    if (unit_ids.length >= 1) {\n      check_unit_ids = true;\n    }\n\n    let check_participant_ids = false;\n    if (participant_ids.length >= 1) {\n      check_participant_ids = true;\n    }\n\n    let skip_optional = false;\n    if (config?.optional === false) {\n      skip_optional = true;\n    }\n\n    let only_optional = false;\n    if (config?.optional === true) {\n      only_optional = true;\n    }\n\n    for (const segment_id of segment_ids) {\n      const segment = this._data[Number(segment_id)];\n\n      for (const unit_id of Object.keys(segment)) {\n        if (\n          !check_unit_ids ||\n          (check_unit_ids && unit_ids.includes(Number(unit_id)))\n        ) {\n          if (!skip_optional && !check_participant_ids && !only_optional) {\n            price_elements.push(...segment[unit_id]);\n            continue;\n          }\n\n          // additional checks\n          const units = segment[unit_id].map(\n            (u: VtbPriceCalculatorDataPriceElement) => {\n              // check on optional\n              if (\n                (skip_optional && u.optional) ||\n                (only_optional && !u.optional)\n              ) {\n                return;\n              }\n\n              // if no check for participants is required\n              if (!check_participant_ids) {\n                return u;\n              }\n\n              // check participants\n              if (check_participant_ids && u.participants) {\n                // make a shallow copy so we're not messing with the original price element\n                const u_copy = {...u};\n\n                let participants_unit_price = 0.0;\n                for (const p of u.participants) {\n                  if (participant_ids.includes(p.participant_id.toString())) {\n                    participants_unit_price += p.price;\n                  }\n                }\n                u_copy.price = participants_unit_price;\n                return u_copy;\n              }\n\n              return;\n            }\n          );\n\n          price_elements.push(...units);\n        }\n      }\n    }\n\n    return price_elements;\n  }\n\n  calculate(elements: Array<VtbPriceCalculatorDataPriceElement>) {\n    let total = 0.0;\n\n    for (const element of elements) {\n      if (!element.optional) {\n        total += element.price;\n      }\n    }\n\n    return total;\n  }\n\n  load(vtbSrcData: any) {  // eslint-disable-line @typescript-eslint/no-explicit-any\n    const parsed_data: any = {}; // eslint-disable-line @typescript-eslint/no-explicit-any\n\n    for (const segment of vtbSrcData.segments) {\n      if (!(segment.typeId in parsed_data)) {\n        parsed_data[segment.typeId] = {};\n      }\n\n      for (const element of segment.elements) {\n        if (!(element.unitId in parsed_data[segment.typeId])) {\n          parsed_data[segment.typeId][element.unitId] = [];\n        }\n\n        const price_element: VtbPriceCalculatorDataPriceElement =\n          this.parseVtbElement(element, segment.title);\n\n        parsed_data[segment.typeId][element.unitId].push(price_element);\n      }\n    }\n    this._data = parsed_data;\n\n    return this;\n  }\n\n  protected parseVtbElement(element: any, grouptitle?: string) {  // eslint-disable-line @typescript-eslint/no-explicit-any\n    const price_element = new VtbPriceCalculatorDataPriceElement();\n\n    price_element.title = element.title;\n    price_element.subtitle = element.subTitle;\n    price_element.optional = element.optional;\n    price_element.price = parseFloat(element.olPrices.salesTotal || 0);\n    price_element.nights = element.flexNights || element.nights;\n    price_element.day = element.day;\n    price_element.unitid = element.unitId;\n    price_element.grouptitle = grouptitle;\n\n    price_element.participants = [];\n    for (const participant_id of Object.keys(element.olPrices.participants)) {\n      const participant_element = new VtbPriceCalculatorDataPriceParticipant();\n      participant_element.participant_id = participant_id;\n      participant_element.price = parseFloat(\n        element.olPrices.participants[participant_id]?.salesPrice || 0\n      );\n      price_element.participants.push(participant_element);\n    }\n\n    return price_element;\n  }\n}\n\n@customElement('vtb-pricecalculator-element')\nexport class VtbPriceCalculatorElement extends LitElement {\n  static override styles = css`\n    .price-calculator-element:after {\n      content: '';\n      display: block;\n      clear: both;\n    }\n\n    .price-calculator-element > div {\n      float: left;\n    }\n\n    .description {\n      width: 70%;\n    }\n\n    .price {\n      width: 30%;\n      text-align: right;\n    }\n\n    h3 {\n      display: block;\n    }\n  `;\n\n  @property({type: String})\n  locale = 'nl-NL';\n\n  @property({type: String})\n  currency = 'EUR';\n\n  @property({type: Number})\n  price = 0;\n\n  @property({type: String, attribute: 'price-type'})\n  priceType = 'pp';\n\n  @property({\n    type: String,\n    attribute: 'display-price',\n    converter: (value, _type) => {\n      if (typeof value == 'string' && value == 'true') {\n        return true;\n      }\n\n      if (typeof value == 'string' && value == 'false') {\n        return false;\n      }\n\n      if (typeof value == 'boolean') {\n        return value;\n      }\n\n      if (value) {\n        return value.toString();\n      }\n\n      return false;\n    },\n  })\n  displayPrice: boolean | string = false;\n\n  @property({\n    type: Boolean,\n    attribute: 'display-zero',\n    converter: (value, _type) => {\n      if (typeof value == 'string' && value == 'true') {\n        return true;\n      }\n\n      if (typeof value == 'string' && value == 'false') {\n        return false;\n      }\n\n      if (typeof value == 'boolean') {\n        return value;\n      }\n\n      if (value) {\n        return true;\n      }\n\n      return false;\n    },\n  })\n  displayPricesIfZero = false;\n\n  override render() {\n    const priceRenderer = new Intl.NumberFormat(this.locale, {\n      style: 'currency',\n      currency: this.currency,\n    });\n\n    let priceDisplay = '';\n    if (this.displayPrice && typeof this.displayPrice == 'boolean') {\n      priceDisplay = priceRenderer.format(this.price) as string;\n    }\n\n    if (!this.displayPrice && typeof this.displayPrice == 'boolean') {\n      priceDisplay = '';\n    }\n\n    if (this.displayPrice && typeof this.displayPrice == 'string') {\n      priceDisplay = this.displayPrice;\n    }\n\n    if (\n      this.displayPrice &&\n      typeof this.displayPrice == 'boolean' &&\n      this.price == 0 &&\n      !this.displayPricesIfZero\n    ) {\n      priceDisplay = '';\n    }\n\n    return html`\n      <div class=\"price-calculator-element\">\n        <div class=\"description\">\n          <slot></slot>\n        </div>\n        <div class=\"price\">${priceDisplay} &nbsp;</div>\n      </div>\n    `;\n  }\n}\n\n@customElement('vtb-pricecalculator-list')\nexport class VtbPriceCalculatorElementList extends LitElement {\n  static override styles = css`\n    :host {\n      display: block;\n    }\n  `;\n\n  @property({type: Boolean, attribute: 'calculate-totals'})\n  calculateTotals = false;\n\n  @property({type: Boolean, attribute: 'display-totals'})\n  displayTotals = false;\n\n  @property({type: Boolean, attribute: false})\n  displayPrices = false;\n\n  @property({type: Boolean, attribute: 'display-zero'})\n  displayPricesIfZero = false;\n\n  @property({type: String})\n  locale = 'nl-NL';\n\n  @property({type: String})\n  currency = 'EUR';\n\n  @property({type: Number, attribute: 'total-price'})\n  totalPrice = 0;\n\n  override render() {\n    return html`\n      <div class=\"price-calculator-element-list\">\n        <h3>${this.title}</h3>\n        <div class=\"\">\n          <slot></slot>\n        </div>\n      </div>\n    `;\n  }\n}\n\n@customElement('vtb-pricecalculator')\nexport class VtbPriceCalculator extends LitElement {\n  static override styles = css`\n    :host {\n      display: block;\n    }\n\n    .price-calculator-totals {\n      font-weight: bold;\n      font-size: 110%;\n      border-top: 1px solid #444;\n      margin-top: 1rem;\n      padding-top: 1rem;\n    }\n  `;\n\n  @property({type: Boolean, attribute: 'calculate-totals'})\n  calculateTotals = false;\n\n  @property({type: Boolean, attribute: 'display-totals'})\n  displayTotals = false;\n\n  @property({type: String})\n  locale = 'nl-NL';\n\n  @property({type: String})\n  currency = 'EUR';\n\n  @property({type: Number, attribute: 'total-price'})\n  totalPrice = 0;\n\n  @property({type: String, attribute: false})\n  customStyles = '';\n\n  // @property({type: Object, attribute: false})\n  // priceData?: VtbPriceCalculatorData;\n\n  @property({type: Array, attribute: false})\n  priceData?: Array<VtbPriceCalculatorDataPriceElement>;\n\n  @property({type: Array, attribute: false})\n  groups = ['elements', 'surcharges', 'optionals'];\n\n  @property({type: Boolean, attribute: false})\n  showPerParticipant = false;\n\n  override render() {\n    let slotHTML: string | TemplateResult = '';\n\n    if (this.children.length == 0 && this.priceData) {\n      slotHTML = this._renderPriceData();\n    }\n\n    let customStyles;\n    if (this.customStyles) {\n      customStyles = html`\n                <style type=text/css>${this.customStyles}</style>\n            `;\n    }\n\n    return html`\n      ${customStyles}\n      <div class=\"price-calculator\">\n        <slot>${slotHTML}</slot>\n        ${this.renderTotals()}\n      </div>\n    `;\n  }\n\n  private renderTotals() {\n    if (this.displayTotals) {\n      return html`\n        <div class=\"price-calculator-totals\">\n          <vtb-pricecalculator-element\n            price=${this.totalPrice}\n            currency=${this.currency}\n            locale=${this.locale}\n            display-price=\"true\"\n          >\n            Totaal\n          </vtb-pricecalculator-element>\n        </div>\n      `;\n    }\n    return '';\n  }\n\n  public renderElementDescription(element: VtbPriceCalculatorDataPriceElement) {\n    return `${element.nights + 1} dgn. - ${element.title}`;\n  }\n\n  private _renderPriceData() {\n    const priceData = this\n      .priceData as Array<VtbPriceCalculatorDataPriceElement>;\n    return html`\n      <vtb-pricecalculator-list title=${ifDefined(this.title)}>\n        ${this._renderPriceList(priceData)}\n      </vtb-pricecalculator-list>\n    `;\n  }\n\n  private _renderPriceList(\n    priceList: Array<VtbPriceCalculatorDataPriceElement>\n  ) {\n    const elementTemplates: Array<TemplateResult> = [];\n\n    for (const element of priceList) {\n      if (element.hidden) {\n        continue;\n      }\n\n      elementTemplates.push(\n        html`\n          <vtb-pricecalculator-element\n            price=${element.price}\n            currency=${this.currency}\n            price-type=\"\"\n            display-price=\"true\"\n          >\n            ${this.renderElementDescription(element)}\n          </vtb-pricecalculator-element>\n        `\n      );\n    }\n\n    return elementTemplates;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'vtb-pricecalculator': VtbPriceCalculator;\n    'vtb-pricecalculator-list': VtbPriceCalculatorElementList;\n    'vtb-pricecalculator-element': VtbPriceCalculatorElement;\n  }\n}\n"]}